<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Fair & Balanced Dice</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script>
        for (let i = 1; i < 7; i++) {
            let red = document.createElement("link");
            red.rel = "preload";
            red.as = "image";
            let yellow = red.cloneNode(true);
            red.href = `./dice/red${i}.svg`;
            yellow.href = `./dice/yellow${i}.svg`;
            document.head.appendChild(red);
            document.head.appendChild(yellow);
        }
    </script>
</head>

<body>
    <div id="interface">
        <div id="title">Fair & Balanced Dice</div>
        <div id="dice">
            <img id="redDie" src="./dice/red1.svg" alt="RedDice" />
            <img id="yellowDie" src="./dice/yellow1.svg" alt="YellowDice" />
        </div>
        <p id="total">0</p>
        <div id="button">Roll</div>
    </div>
    <script src='main.js'></script>
    <script type='module'>
        import { Soundfont } from "https://unpkg.com/smplr/dist/index.mjs";
        let thonk = 0,
            musicSequence = [
                'C5', 'C5', 'E5', 'E5', 'A4', 'A4', 'C5', 'C5', 'F4', 'F4', 'A4', 'A4', 'G4', 'G4', 'B4', 'B4',
                'C5', 'C5', 'E5', 'E5', 'A4', 'A4', 'C5', 'C5', 'F4', 'F4', 'A4', 'A4', 'G4', 'G4', 'B4', 'B4'
            ];
        const context = new AudioContext();
        var marimba = new Soundfont(context, { instrument: "vibraphone" });
        const clicking = () => {
            context.resume();
            marimba.start({ note: musicSequence[thonk], velocity: 80 });
            thonk = (thonk + 1) % musicSequence.length;
        }
        document.getElementById('button').addEventListener('click', clicking);
        document.getElementById('button').addEventListener('touchstart', clicking);
    </script>
</body>

</html>